<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width,user-scalable=no">
    <meta charset="UTF-8">
    <title>欧弟</title>
    <link rel="stylesheet" href="css/chat.css">
</head>

<body>
    <div class="main translate" id="main">
        <div class="content" id="content">
            <div class="text-bg date-time">2017年5月20日 10:50:41</div>
            <div class="text-bg add-finish-tip">你已经添加了欧弟，现在可以聊天了</div>
            <div class='box friend-box' style="display:  block">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="friend-text box-content">
                    萨瓦迪卡！我是欧弟，我现在在泰国～～泰国好美啊～
                </div>
            </div>
            <div class='box my-box' style="display:  block">
                <img src="src/oudi.jpg" alt="" class="box-avatar my-avatar">
                <div class="my-text box-content">
                    啊啊啊～欧弟～欧弟～真的是 你吗 ？？？
                </div>
            </div>
            <div class='box friend-box' style="display:  block">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="friend-text box-content">
                    是啊！是啊！是我啊！是啊！是啊！是我啊！
                </div>
            </div>
            <div class='box my-box' style="display:  block">
                <img src="src/avatar.jpg" alt="" class="box-avatar my-avatar">
                <div class="my-text box-content">
                    这么高级？！快给我看看~
                </div>
            </div>
            <div class='box friend-box' style="">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="box-video">
                    <img src="src/cover1.png" alt="" class="video-cover">
                    <img src="src/play_btn.png" alt="" class="video-play-btn">
                </div>
            </div>
            <div class='box my-box' style="display:  block">
                <img src="src/avatar.jpg" alt="" class="box-avatar my-avatar">
                <div class="my-text box-content">
                    是吗？！！发现好多有趣的东西呢～
                </div>
            </div>
            <div class='box friend-box' style="">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="box-img">
                    <img src="src/hair.gif" alt="" class="friend-img">
                </div>
            </div>
            <div class='box friend-box' style="">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="box-img">
                    <img src="src/redbag.jpg" alt="" class="friend-img">
                </div>
            </div>
            <div class='box friend-box' style="">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="box-video">
                    <img src="src/cover1.png" alt="" class="video-cover">
                    <img src="src/play_btn.png" alt="" class="video-play-btn">
                </div>
            </div>
            <div class='box my-box' style="display:  block">
                <img src="src/avatar.jpg" alt="" class="box-avatar my-avatar">
                <div class="my-text box-content">
                    是吗？！！发现好多有趣的东西呢～
                </div>
            </div>
            <div class='box friend-box' style="">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="box-img">
                    <img src="src/hair.gif" alt="" class="friend-img">
                </div>
            </div>
            <div class='box friend-box' style="">
                <img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">
                <div class="box-img">
                    <img src="src/redbag.jpg" alt="" class="friend-img">
                </div>
            </div>
        </div>
    </div>
    <div class="footer">
        <img src="src/record_btn.png" class="foot-btn record-btn">
        <input type="text" class="input" id="input" disabled="disabled" />
        <img src="src/face_icon.png" class="foot-btn face-icon">
        <img src="src/more_icon.png" class="foot-btn more-icon">
    </div>
    <div class="pop-box" id="pop-box"></div>
    <div class="full-box">
        <img src="src/close.png" alt="" class="close">
        <!-- <img src="src/cover1.png" class="full-img"> -->
        <video src="src/video1.mp4" controls preload="auto" class="full-video" id="full_video"></video>
    </div>
    <audio id="sound" src="src/msg.mp3" preload="preload">您的浏览器不支持 audio标签。</audio>
    <script src="js/zepto.min.js"></script>
    <script type="text/javascript" src="js/iscroll-lite.js"></script>
    <!-- <script src="js/chat.js"></script> -->
    <script>
    window.onload = function() {
        // showDateTime();
        winH = $(window).height();
        // 视口高度
        var footH = $('.footer').height();
        $("#main").height(winH - footH - 10);
        myScroll = new IScroll('#main');
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, false);

        var i = 0;
        document.querySelector('.footer').onclick = function() {
            if (i % 2 == 0) {
                var html = friendImg('src/hair.gif');

            } else {
                var html = friendText('哈哈哈哈哈哈哈');
            }
            i++;
            $('#content').append(html);
            setTimeout(function() {
                myScroll.refresh();
                var curH = $('#content').height();
                var cliH = winH - footH-10; //winH - 52;
                var diffH = curH - cliH;
                if (curH > cliH) {
                    myScroll.scrollTo(0, -diffH, 300);

                }
            }, 0);


        };
    }

    function friendText(text) {
        return '<div class="box friend-box">' +
            '<img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">' +
            '<div class="friend-text box-content">' + text + '</div>' +
            '</div>';
    }

    function myText(text) {
        return '<div class="box my-box">' +
            '<img src="src/avatar.jpg" alt="" class="box-avatar my-avatar">' +
            '<div class="my-text box-content">' + text + '</div>' +
            '</div>';
    }

    function friendImg(src) {
        var imgClass = src.indexOf('gif') == -1 ? '' : 'img-gif';
        return '<div class="box friend-box">' +
            '<img src="src/oudi.jpg" alt="" class="box-avatar friend-avatar">' +
            '<div class="box-img ' + imgClass + '"><img src="' + src + '" alt="" class="friend-img"></div>' +
            '</div>';
    }
    </script>
</body>

</html>
